<div>
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-lg font-semibold">Domain Health</h2>
    <button
      (click)="runVerification()"
      [disabled]="verifying || loading"
      class="btn btn-primary">
      <svg *ngIf="!verifying" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><polyline points="21 3 21 8 16 8"></polyline></svg>
      {{ verifying ? 'Running...' : 'Run Verification' }}
    </button>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="alert alert-destructive mb-4">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
    <div>
      {{ error }}
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <mat-spinner diameter="36"></mat-spinner>
  </div>

  <!-- Health check grid -->
  <div *ngIf="!loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    <div
      *ngFor="let check of healthChecks"
      class="card p-5 transition-all hover:border-border/60"
      [ngClass]="getStatusCardClass(check.status)">
      <div class="flex items-start gap-4">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-lg flex-shrink-0"
             [ngClass]="getStatusIconClass(check.status)">
          {{ getStatusIcon(check.status) }}
        </div>
        <div class="flex-1 min-w-0">
          <div class="flex justify-between items-center mb-1">
            <h3 class="text-sm font-bold tracking-tight">{{ check.checkType }}</h3>
            <span class="text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded"
                  [ngClass]="getStatusBadgeClass(check.status)">
              {{ check.status }}
            </span>
          </div>
          <p *ngIf="check.message" class="text-xs text-muted-foreground leading-relaxed mt-2 line-clamp-3" [title]="check.message">
            {{ check.message }}
          </p>
          <p *ngIf="check.lastChecked" class="text-[10px] text-muted-foreground/60 mt-3 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            Checked {{ check.lastChecked | date:'short' }}
          </p>
        </div>
      </div>
    </div>

    <div *ngIf="healthChecks.length === 0" class="col-span-full">
      <div class="card p-12 text-center text-muted-foreground border-dashed">
        <p>No health checks available. Run a verification to check domain health.</p>
      </div>
    </div>
  </div>
</div>
